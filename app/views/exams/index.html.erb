<div class="container content-form">
  <%= form_tag exams_path, method: :post do %>
    <%= select_tag "exam[subject_id]",
      options_from_collection_for_select(@subject, :id, :name, params[:subject_id]) %>
    <%= submit_tag t("views.user.create"), class: "btn btn-md btn-primary" %>
  <% end %>
  <div id="form">
    <span class="glyphicon glyphicon-search", id="search"></span>
      <div id= "form_search">
        <%= search_form_for @search, class: "form-inline" do |f| %>
          <div class="form-group">
            <%= f.label :status %>
            <%= f.search_field :status_eq, class: "form-control" %><br/>
          </div>

           <%= f.submit t("views.user.search"), class: "btn btn-sm btn-primary" %>
        <% end %>
      </div>
  </div>
  <table class="table table-bordered">
    <thead>
      <tr>
        <th><%= t "admin.exams.created_date" %></th>
        <th><%= t "admin.exams.subject" %></th>
        <th><%= t "admin.exams.status" %></th>
        <th><%= t "admin.exams.duration" %></th>
        <th><%= t "admin.exams.question_number" %></th>
        <th><%= t "admin.exams.spent_time" %></th>
        <th><%= t "admin.exams.score" %></th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      <% @exams.each do |exam| %>
      <tr class="success">
        <td><%= exam.created_at.strftime("%H:%M:%S") %></td>
        <td><%= exam.subject.name %></td>
        <td>
          <% if exam.checked? %>
            <label class="label label-success"> <%= exam.status %></label>
          <% elsif exam.uncheck? %>
            <label class="label label-primary"><%= exam.status %></label>
          <% elsif exam.testing? || exam.saved? %>
            <label class="label label-warning"><%= exam.status %></label>
          <% else %>
            <label class="label label-info"><%= exam.status %></label>
          <% end %>
        </td>
        <td><%= exam.duration %></td>
        <td><%= exam.question_number %></td>
        <td><%= start_time exam %></td>
        <% if exam.checked? %>
          <td>
            <%= exam.results.correct_answers.size %>/
            <%= exam.question_number %>
          </td>
          <td><%= link_to t("admin.exams.view"), exam_path(exam),
            class: "col-md-8 btn btn-success" %>
          </td>
        <% else %>
          <td><%= Settings.score %>/<%= exam.question_number %></td>
        <% end %>
        <% if exam.start? %>
          <td><%= link_to t("admin.exams.start"), exam_path(exam),
            class: "col-md-8 btn btn-primary" %></td>
        <% elsif exam.testing? %>
          <td><%= link_to t("admin.exams.view"), exam_path(exam),
            class: "col-md-8 btn btn-warning" %></td>
        <% elsif exam.saved? %>
          <td><%= link_to t("admin.exams.view"), exam_path(exam),
            class: "col-md-8 btn btn-warning" %></td>
        <% elsif exam.uncheck? %>
          <td><%= link_to t("admin.exams.view"), exam_path(exam),
            class: "col-md-8 btn btn-success" %></td>
        <% end %>
      </tr>
      <% end %>
    </tbody>
  </table>
  <%= paginate @exams %>
</div>
